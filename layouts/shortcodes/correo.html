{{ $dimenbase := .Get "dimenbase" | default "24" }}

{{ $dir := .Get "dir" }}
{{ $tipo := .Get "tipo" }}
{{ $titulo := .Get "titulo" }}

{{ $ancho := .Get "ancho" }}
{{ $alto := .Get "alto" }}

{{ if not $ancho }}
    {{ if $alto }}
        {{ $ancho = $alto }}
    {{ else }}
        {{ $ancho = $dimenbase }}
    {{ end }}
{{ end }}

{{ if not $alto }}
    {{ $alto = $ancho }}
{{ end }}

{{ if and $dir $ancho $alto }}
{{ if not $tipo }}
<label hidden="hidden" id="{{ $dir }}">{{ $dir }}</label>
<a rel="noopener" target="_blank" href="mailto:{{ $dir }}" onclick="copyToClipboard('{{ $dir }}')">
{{ else if eq $tipo "tutanota" }}
<label hidden="hidden" id="{{ $dir }}">{{ $dir }}@tutanota.com</label>
<a rel="noopener" target="_blank" href="mailto:{{ $dir }}@tutanota.com" onclick="copyToClipboard('{{ $dir }}')">
{{ else if eq $tipo "gmail" }}
<label hidden="hidden" id="{{ $dir }}">{{ $dir }}@gmail.com</label>
<a rel="noopener" target="_blank" href="mailto:{{ $dir }}@gmail.com" onclick="copyToClipboard('{{ $dir }}')">
{{ else if eq $tipo "outlook" }}
<label hidden="hidden" id="{{ $dir }}">{{ $dir }}@outlook.com</label>
<a rel="noopener" target="_blank" href="mailto:{{ $dir }}@outlook.com" onclick="copyToClipboard('{{ $dir }}')">
{{ end }}
    <svg fill="currentColor" style="padding: 2px; color: var(--color-text)" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="{{ $ancho }}" height="{{ $alto }}">
        {{ if $titulo }}
        <title>{{ $titulo }}</title>
        {{ else }}
        <title>{{ $dir }}</title>
        {{ end }}
        {{ if not $tipo }}
        <g stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></g>
        {{ else if eq $tipo "tutanota" }}
        <path d="M2.158.934C.978.934.025 1.895.023 3.08.017 9.74.005 16.413 0 23.066c.793-.297 1.67-.56 2.56-.918 6.188-2.485 11.249-4.598 11.253-6.983a1.66 1.66 0 0 0-.016-.23c-.32-2.356-5.916-3.087-5.908-4.166a.37.37 0 0 1 .05-.177c.673-1.184 3.336-1.128 4.316-1.212.982-.085 3.285-.067 3.397-.773a.44.44 0 0 0 .005-.065c.003-.656-1.584-.913-1.584-.913s1.925.29 1.92 1.042a.445.445 0 0 1-.015.114c-.207.81-1.901.962-3.021 1.017-1.06.054-2.673.175-2.679.695 0 .03.005.062.015.095.253.76 6.167 1.127 9.95 3.102 2.178 1.136 3.26 3.004 3.757 4.974V3.08A2.14 2.14 0 0 0 21.866.934H2.158Z"/>
        {{ else if eq $tipo "gmail" }}
        <path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/>
        {{ else if eq $tipo "outlook" }}
        <path d="M7.88 12.04q0 .45-.11.87-.1.41-.33.74-.22.33-.58.52-.37.2-.87.2t-.85-.2q-.35-.21-.57-.55-.22-.33-.33-.75-.1-.42-.1-.86t.1-.87q.1-.43.34-.76.22-.34.59-.54.36-.2.87-.2t.86.2q.35.21.57.55.22.34.31.77.1.43.1.88zM24 12v9.38q0 .46-.33.8-.33.32-.8.32H7.13q-.46 0-.8-.33-.32-.33-.32-.8V18H1q-.41 0-.7-.3-.3-.29-.3-.7V7q0-.41.3-.7Q.58 6 1 6h6.5V2.55q0-.44.3-.75.3-.3.75-.3h12.9q.44 0 .75.3.3.3.3.75V10.85l1.24.72h.01q.1.07.18.18.07.12.07.25zm-6-8.25v3h3v-3zm0 4.5v3h3v-3zm0 4.5v1.83l3.05-1.83zm-5.25-9v3h3.75v-3zm0 4.5v3h3.75v-3zm0 4.5v2.03l2.41 1.5 1.34-.8v-2.73zM9 3.75V6h2l.13.01.12.04v-2.3zM5.98 15.98q.9 0 1.6-.3.7-.32 1.19-.86.48-.55.73-1.28.25-.74.25-1.61 0-.83-.25-1.55-.24-.71-.71-1.24t-1.15-.83q-.68-.3-1.55-.3-.92 0-1.64.3-.71.3-1.2.85-.5.54-.75 1.3-.25.74-.25 1.63 0 .85.26 1.56.26.72.74 1.23.48.52 1.17.81.69.3 1.56.3zM7.5 21h12.39L12 16.08V17q0 .41-.3.7-.29.3-.7.3H7.5zm15-.13v-7.24l-5.9 3.54Z"/>
        {{ end }}
    </svg>
</a>
{{ end }}
<script>
    const copyToClipboard = (elementId) => {
        const temp = document.createElement("input");
        const text = document.getElementById(elementId).innerHTML;
        temp.setAttribute("value", text);
        document.body.appendChild(temp);
        temp.select();
        document.execCommand("copy");
        document.body.removeChild(temp);
    };
</script>
